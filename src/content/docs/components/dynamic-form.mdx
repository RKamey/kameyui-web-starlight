---
title: Dynamic Form
description: Formulario din√°mico y configurable para React con validaciones integradas, m√∫ltiples layouts y soporte para API.
---

import { Code } from '@astrojs/starlight/components';

export const fileName = 'App.tsx';
export const code = `
  import { DynamicForm, FormField } from "kamey-components";

const App = () => {

    // Definimos los campos del formulario y podemos tiparlos con FormField
    const fields: FormField[] = [
      {
        type: 'text',
        name: 'name',
        label: 'Nombre',
        validations: [
          {
            required: {
              value: true,
              message: 'El nombre es requerido'
            }
          }
        ],
      },
      {
        type: 'text',
        name: 'lastName',
        label: 'Apellido',
        validations: [
          {
            required: {
              value: true,
              message: 'El apellido es requerido'
            }
          }
        ],
      },
      {
        type: 'email',
        name: 'email',
        label: 'Correo',
        validations: [
          {
            required: {
              value: true,
              message: 'El correo es requerido'
            }
          },
          {
            email: {
              value: true,
              message: 'El correo no es v√°lido'
            }
          }
        ],
      },
      {
        type: 'password',
        name: 'password',
        label: 'Contrase√±a',
        validations: [
          {
            required: {
              value: true,
              message: 'La contrase√±a es requerida'
            }
          }
        ],
      }
    ]

    return (
      <div>
        <DynamicForm
          title='Crear Usuario'
          description='Por favor, ingrese los datos del usuario'
          icon={<FaUser />}
          fields={fields}
          submitButtonText='Crear Usuario'
        />
      </div>
    );

};

export default App;
`;

<Code title={fileName} code={code} lang="tsx" />

## Caracter√≠sticas Principales

- ‚úÖ Configuraci√≥n declarativa de campos
- ‚úÖ Validaciones integradas y personalizables
- ‚úÖ Soporte para layouts vertical/horizontal
- ‚úÖ Integraci√≥n con APIs (CRUD)
- ‚úÖ Campos responsivos en m√∫ltiples columnas
- ‚úÖ Modos creaci√≥n/actualizaci√≥n

## Uso B√°sico

```tsx
// Ejemplo m√≠nimo de implementaci√≥n
<DynamicForm fields={[{ type: "text", name: "example", label: "Ejemplo" }]} />
```

## API Reference

Propiedades del Componente

| Propiedad        | Descripci√≥n                                                                    | Tipo                                              | Por defecto | Requerido |
| ---------------- | ------------------------------------------------------------------------------ | ------------------------------------------------- | ----------- | --------- |
| mode             | Modo de operaci√≥n ('create' para crear nuevos registros, 'update' para editar) | 'create' \| 'update'                              | 'create'    | S√≠        |
| title            | T√≠tulo principal del formulario                                                | string                                            | -           | No        |
| description      | Texto descriptivo debajo del t√≠tulo                                            | string \| ReactElement                            | -           | No        |
| icon             | Icono que acompa√±a al t√≠tulo                                                   | ReactElement                                      | -           | No        |
| layout           | Disposic√≠on de los campos                                                      | 'vertical' \| 'horizontal'                        | 'vertical'  | No        |
| cols             | N√∫mero de columnas para organizaci√≥n responsiva                                | number                                            | 1           | No        |
| fields           | Configurac√≠on de campos del formulario                                         | [FormField[] \| FormField[][]](./form-field)      | -           | S√≠        |
| submitButtonText | Texto personalizado para el bot√≥n de env√≠o                                     | string                                            | 'Enviar'    | No        |
| onSubmit         | Callback que se ejecuta al enviar el formulario                                | (data: Record&lt;string&#44; unknown&gt;) => void | -           | No        |
| apiConfig        | Configuraci√≥n para conexi√≥n con API                                            | [ApiConfig](./api-config)                         | -           | No        |
| initialData      | Datos iniciales para el modo de edici√≥n                                        | Record&lt;string&#44; unknown&gt;                 | -           | No        |
| customCols       | Habilita organizaci√≥n avanzada de columnas                                     | boolean                                           | false       | No        |

## Tipos de Campos (FormField)

Cada campo debe contener estas propiedades b√°sicas:

```tsx
interface FormField {
  type: FieldType;
  name: string;
  label: string;
  // ... otras propiedades opcionales o que dependen del tipo de campo
}
```

### Tipos Disponibles (FieldType)

- `text` - Campo de texto simple
- `email` - Campo de email con validaci√≥n autom√°tica
- `password` - Campo de contrase√±a con visibilidad ocultable
- `number` - Campo num√©rico
- `datepicker` - Selector de fecha, con soporte para formato de hora y fecha
- `rangepicker` - Selector de rango de fechas
- `select` - Selector de opciones, con soporte para opciones din√°micas
- `radio` - Selector de opciones en radio buttons
- `checkbox` - Selector de opciones en checkboxes
- `textarea` - Campo de texto multil√≠nea
- `upload` - Selector de archivos, con soporte para m√∫ltiples archivos
- `slider` - Selector de rango num√©rico
- `switch` - Selector de estado binario

### Ejemplo Completo de Campo

```tsx
{
  type: 'select',
  name: 'country',
  label: 'Pa√≠s',
  options: [
    { label: 'M√©xico', value: 'MX' },
    { label: 'Espa√±a', value: 'ES' }
  ],
  validations: [
    {
      required: {
        value: true,
        message: 'Selecciona tu pa√≠s'
      }
    }
  ]
}
```

### Sistema de validaci√≥n

Configura reglas de validaci√≥n por campo usando el formato

```tsx
{
  validations: [
    {
      required: true // requerido con mensaje por defecto
    },
    {
      required: { // requerido con mensaje personalizado
        value: true,
        message: 'Este campo es requerido'
      }
    },
    {
      email: {
        value: true,
        message: 'Correo no v√°lido'
      }
    }
    {
      minLength: {
        value: 5,
        message: 'M√≠nimo 5 caracteres'
      }
    },
    {
      maxLength: {
        value: 10,
        message: 'M√°ximo 10 caracteres'
      }
    },
    {
      pattern: {
        value: /^[A-Za-z]+$/,
        message: 'Solo letras'
      }
    },
  ]
}
```

## Ejemplos Avanzados

### Formularios con Columnas Personalizadas

```tsx
// Puedes configurar los campos a tu antojo, en una fila tener 4, en otras 2, etc.
const fields: FormField[][] = [ // Nota que este tipado es diferente, es un arreglo de arreglos
  [
    { type: "text", name: "name", label: "Nombre" },
    { type: "text", name: "lastName", label: "Apellido" },
    { type: "number", name: "age", label: "Edad" },
  ],
  [
    { type: "email", name: "email", label: "Correo" },
    { type: "password", name: "password", label: "Contrase√±a" },
  ],
]


<DynamicForm
  layout='horizontal'
  cols={2}
  customCols // Debes habilitar esta propiedad para usar campos personalizados
  fields={fields}
/>
```

### Usando la propiedad Cols

```tsx
// Esta configuraci√≥n es m√°s sencilla y autom√°tica, defines los campos como siempre
const fields: FormField[] = [
  { type: "text", name: "name", label: "Nombre" },
  { type: "text", name: "lastName", label: "Apellido" },
  { type: "number", name: "age", label: "Edad" },
  { type: "email", name: "email", label: "Correo" },
  { type: "password", name: "password", label: "Contrase√±a" },
]

<DynamicForm
  cols={2} // Indicas cu√°ntas columnas quieres, y el componente se encarga de distribuirlos
  fields={fields}
/>
```

### Recibir datos iniciales para edici√≥n

Imagina que tienes una vista de edici√≥n de usuario, recibes los datos del usuario ya sea de una API, por props, etc.
Cuando tengas este caso, debes asegurarte que el campo `name` de cada `FormField` coincida con la clave del objeto de datos iniciales.

```tsx
const initialData = {
  name: "Juan",
  lastName: "Perez",
  email: "juan@gmail.com",
};

const fields: FormField[] = [
  { type: "text", name: "name", label: "Nombre" },
  { type: "text", name: "lastName", label: "Apellido" },
  { type: "email", name: "email", label: "Correo" },
  { type: "password", name: "password", label: "Contrase√±a" },
];

<DynamicForm
  mode="update"
  title="Editar Usuario"
  description="Actualiza los datos del usuario"
  icon={<FaUser />}
  fields={fields}
  initialData={initialData}
  submitButtonText="Actualizar Usuario"
/>;
```

### Env√≠o de datos a una API
La forma m√°s com√∫n de enviar datos de un formulario a una API es usando la propiedad `onSubmit`, que recibe un objeto con los valores de los campos.

```tsx
const fields: FormField[] = [
  { type: "text", name: "name", label: "Nombre" },
  { type: "text", name: "lastName", label: "Apellido" },
  { type: "email", name: "email", label: "Correo" },
  { type: "password", name: "password", label: "Contrase√±a" },
];

const handleSubmit = (data: Record<string, unknown>) => {
  // Aqu√≠ puedes enviar los datos a tu API
  console.log(data);
};

<DynamicForm
  fields={fields}
  onSubmit={handleSubmit}
/>;
```

## Buenas Pr√°cticas

- üîí **Tipado de Campos**: Usa la interfaz `FormField` para tipar los campos del formulario.
- üìù **Validaciones Contextuales**: Ajusta las validaciones seg√∫n el modo (create/update) y tipo de campo.
- üì¶ **Organizaci√≥n de Campos**: Agrupa campos relacionados usando el sistema de columnas.
- üêõ **Manejo de Errores**: Implementa l√≥gica de notificaci√≥n en el callback `onSubmit`.